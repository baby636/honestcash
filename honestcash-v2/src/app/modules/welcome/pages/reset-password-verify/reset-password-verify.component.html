<app-welcome-heading
  *ngIf="!(auth$ | async).newPasswordSet"
  title="Change your password"
  description="A new wallet is generated on password change."
></app-welcome-heading>
<div
  *ngIf="!(auth$ | async).newPasswordSet"
  class="
    flex
    flex-wrap
    items-center
    justify-center
    xs:w-full
    sm:w-3/5
    md:w-1/2
    lg:w-1/3
    xl:w-1/4
    xxl:w-1/5
    xxxl:w-1/6
    mx-auto
    xs:px-4
    text-center
    mb-8
  "
>
  <form
    class="w-full" name="form" #f="ngForm" (ngSubmit)="f.form.valid && onSubmit(f)" novalidate>
    <div class="w-full mb-4 relative">
      <input
        required
        name="email"
        #email="ngModel"
        [ngModel]="values.email"
        [ngClass]="{ 'border-red': f.submitted && email.invalid }"
        class="w-full p-4 bg-white border-2 border-transparent border-solid font-bold text-black rounded-lg opacity-80"
        type="text"
        placeholder="E-Mail"
        email
      />
      <span
        class="absolute text-red cursor-pointer transform-y-center"
        *ngIf="f.submitted && email.invalid"
      >
        <i
          *ngIf="email.errors.required"
          class="fas fa-exclamation-circle"
          tooltip="E-mail is required"
          placement="right"
          delay="500"
        ></i>
        <i
          *ngIf="email.errors.email"
          class="fas fa-exclamation-circle"
          tooltip="E-mail must be a valid e-mail address"
          placement="right"
          delay="500"
        ></i>
      </span>
    </div>
    <div class="w-full mb-4 relative">
      <input
        required
        minlength="8"
        name="newPassword"
        #newPassword="ngModel"
        [ngModel]="values.newPassword"
        [ngClass]="{ 'border-red': f.submitted && newPassword.invalid }"
        class="mb-2 w-full p-4 bg-white border-2 border-transparent border-solid font-bold text-black rounded-lg opacity-80"
        type="password"
        placeholder="New password"
      />
      <span
        class="absolute text-red cursor-pointer transform-y-center"
        *ngIf="f.submitted && newPassword.invalid"
      >
        <i
          *ngIf="newPassword.errors.required"
          class="fas fa-exclamation-circle"
          tooltip="Password is required"
          placement="right"
          delay="500"
        ></i>
        <i
          *ngIf="newPassword.errors.minlength"
          class="fas fa-exclamation-circle"
          tooltip="Password must be at least 8 characters long"
          placement="right"
          delay="500"
        ></i>
      </span>
    </div>
    <div class="w-full mb-4 relative">
      <input
        required
        minlength="8"
        name="repeatNewPassword"
        #repeatNewPassword="ngModel"
        [ngModel]="values.repeatNewPassword"
        [ngClass]="{ 'border-red': f.submitted && repeatNewPassword.invalid }"
        class="mb-2 w-full p-4 bg-white border-2 border-transparent border-solid font-bold text-black rounded-lg opacity-80"
        type="password"
        placeholder="Repeat new password"
      />
      <span
        class="absolute text-red cursor-pointer transform-y-center"
        *ngIf="f.submitted && repeatNewPassword.invalid"
      >
        <i
          *ngIf="repeatNewPassword.errors.required"
          class="fas fa-exclamation-circle"
          tooltip="Password is required"
          placement="right"
          delay="500"
        ></i>
        <i
          *ngIf="repeatNewPassword.errors.minlength"
          class="fas fa-exclamation-circle"
          tooltip="Password must be at least 8 characters long"
          placement="right"
          delay="500"
        ></i>
      </span>
    </div>
    <div *ngIf="errorMessage" class="w-full flex justify-center mb-4 p-4 bg-white border-2 text-sm border-transparent border-solid font-bold text-red rounded-lg opacity-80">
      <span>{{errorMessage}}</span>
    </div>
    <app-welcome-loading-submit-button text="Change password" loadingText="Changing password" [isLoading]="isLoading"></app-welcome-loading-submit-button>
  </form>
</div>


<div
  *ngIf="(auth$ | async).newPasswordSet"
  class="
    flex
    flex-wrap
    items-center
    justify-center
    xs:w-full
    sm:w-3/5
    md:w-1/2
    lg:w-1/3
    xl:w-1/4
    xxl:w-1/5
    xxxl:w-1/6
    mx-auto
    xs:px-4
    text-center
    mb-8
  "
>
  <div class="w-full flex justify-center mb-4 p-4 bg-white border-2 text-sm border-transparent border-solid text-black font-bold rounded-lg opacity-80">
    <span>The new password has been set. Do not forget to back-up your new wallet recovery phrase after logging in!</span>
  </div>
</div>
